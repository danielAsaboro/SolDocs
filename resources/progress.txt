2026-02-13 - Fix B4: Race condition in src/store/index.ts
  - Added FileMutex class with per-file async locking (promise-chaining pattern)
  - Added *Safe async variants for all read-modify-write Store methods:
    saveProgramSafe, removeProgramSafe, addToQueueSafe,
    updateQueueItemSafe, removeFromQueueSafe
  - Updated agent/core.ts to use *Safe methods for all store mutations
  - Updated api/routes.ts to use async handlers with *Safe methods
  - Added 11 new tests: 7 for Store mutex integration, 4 for FileMutex unit tests
  - Files changed: src/store/index.ts, src/agent/core.ts, src/api/routes.ts, src/tests/store.test.ts

2026-02-13 - Add T7: Agent tests in src/tests/agent.test.ts
  - Added 12 new tests (25 total, up from 13) across 7 new describe blocks:
    1. AI failure handling: verifies program marked failed when AI throws
    2. Error cap enforcement: confirms errors array capped at 50 entries
    3. Discovery seeding (2 tests): validates queue seeding on first start, skips when queue non-empty
    4. Documentation content structure (2 tests): validates all 4 doc sections populated, correct program metadata
    5. IDL change detection (2 tests): first-time doc generation with cached IDL, checkForUpgrades returns only documented programs
    6. Queue behavior during processing (2 tests): graceful stop mid-queue, attempt count incrementing on failure
    7. State sync with store: getState reflects external store mutations
    8. StartedAt tracking: validates startedAt updates when agent starts
  - Added import for checkForUpgrades from agent/discovery module
  - All 100 tests pass across 6 test suites, build clean
  - Files changed: src/tests/agent.test.ts

2026-02-13 - Add I4: Webhook notification on doc completion (WEBHOOK_URL env)
  - Added webhookUrl (string | null) to Config interface, loaded from WEBHOOK_URL env var
  - Created src/agent/webhook.ts with sendWebhookNotification():
    - Sends POST with JSON payload: event, programId, name, timestamp, documentation summary
    - Uses native fetch with 10s timeout via AbortSignal.timeout
  - Integrated into Agent.processProgram: notifyWebhook() called after docs saved, before queue removal
    - Webhook errors are caught and logged, never block documentation flow
  - Added 5 new tests in src/tests/agent.test.ts (webhook notification on doc completion):
    1. Sends POST to WEBHOOK_URL with correct payload structure
    2. Does not send webhook when WEBHOOK_URL is not set
    3. Does not fail doc generation when webhook returns HTTP error
    4. Does not fail doc generation when webhook network request throws
    5. Sends separate webhook for each program in multi-program run
  - Updated .env.example with WEBHOOK_URL documentation
  - Updated api.test.ts Config to include webhookUrl: null
  - All 105 tests pass across 6 test suites, build clean
  - Files changed: src/config.ts, src/agent/webhook.ts (new), src/agent/core.ts,
    src/tests/agent.test.ts, src/tests/api.test.ts, src/.env.example

2026-02-13 - Add I5: Agent concurrency (AGENT_CONCURRENCY env, Promise.allSettled)
  - Added agentConcurrency (number) to Config interface, loaded from AGENT_CONCURRENCY env var
    - Defaults to 1, enforces minimum of 1 via Math.max
  - Refactored Agent.processQueue to process items in batches using Promise.allSettled:
    - Splits pending items into batches of size `agentConcurrency`
    - Each batch runs concurrently via Promise.allSettled (no single failure blocks others)
    - Extracted processProgramSafe() method to handle per-item error catching
  - Added QueueItem to agent/core.ts imports for type safety
  - Added 6 new tests in src/tests/agent.test.ts (agent concurrency):
    1. Defaults to concurrency=1 when AGENT_CONCURRENCY not set
    2. Processes multiple programs concurrently with concurrency > 1
    3. Processes items in batches according to concurrency setting
    4. Handles mixed success and failure in concurrent batch
    5. Does not exceed concurrency limit even with large queue
    6. Works correctly with concurrency=1 (sequential behavior preserved)
  - Updated .env.example with AGENT_CONCURRENCY documentation
  - Updated api.test.ts Config to include agentConcurrency: 1
  - All 111 tests pass across 6 test suites, build clean
  - Files changed: src/config.ts, src/agent/core.ts, src/tests/agent.test.ts,
    src/tests/api.test.ts, src/.env.example

2026-02-13 - Verify all tests pass (75+), build clean, web UI loads
  - Ran full test suite: 111 tests pass across 6 test suites (idl, generator, solana-client, store, agent, api)
  - TypeScript build clean: tsc --noEmit exits with zero errors
  - Web UI functional verification:
    - GET / returns 200 with index.html containing SolDocs title and app.js script tag
    - GET /styles.css returns 200 with CSS content
    - GET /app.js returns 200 with JS content
    - GET /api/health returns 200 with {status: "ok"}
  - No issues found, no code changes required
  - Files changed: resources/PRD.md (task marked complete)
